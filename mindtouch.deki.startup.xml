<script>
  <!-- register Deki services -->
  <action verb="POST" path="/host/load?name=mindtouch.deki" />
  <action verb="POST" path="/host/load?name=mindtouch.deki.services" />
  <action verb="POST" path="/host/load?name=mindtouch.indexservice" />

  <!-- start Deki services -->
  <action verb="POST" path="/host/services">
    <config>

      <!-- Service startup -->
      <!-- deki: relative path for deki-api service. I.e., http://host/deki -->
      <!-- sid: the serviceid points to a class that represents the service for startup-->
      <path>deki</path>
      <sid>http://services.mindtouch.com/deki/draft/2006/11/dekiwiki</sid>

      <!-- Global settings -->
      <!-- deki-path: full path to dekiwiki php (pointed to by web server) -->
      <!-- apikey: apikey used to access privileged features of deki-api -->
      <!-- imagemagick-ignore-list: comma separated list of file extensions to bypass image preview -->
      <!-- imagemagick-convert-path: full path to imagemagick convert (used to generate image previews) -->
      <!-- imagemagick-identify-path: full path to imagemagick identify (used to determine image dimensions) -->
      <!-- deki-resources-path: path to deki-wiki resources directory containing txt files with localized strings.
              Resource files are searched in the order "resources.custom.txt" -> "resources-[language]-[culture].txt" -> "resources-[language].txt" -> "resources.txt"
              where [language] and [culture] are standard two letter abbreviations such as en-us -->
      <!-- dblogging-conn-string: DB connection string for detailed logging of deki-api requests/responses. Comment out to disable this logging -->
      <deki-path>/var/www/dekiwiki</deki-path>

      <!-- Global apikey valid for all wiki instances -->
      <apikey>M1fKrjSPQu5KSWefi5s8no4yitd2Ndi5hdJ</apikey>

      <imagemagick-ignore-list>ico</imagemagick-ignore-list>
      <imagemagick-convert-path>/usr/bin/convert</imagemagick-convert-path>
      <imagemagick-identify-path>/usr/bin/identify</imagemagick-identify-path>
      <html2ps-path>/usr/bin/html2ps</html2ps-path>
      <ps2pdf-path>/usr/bin/ps2pdf</ps2pdf-path>
      <!-- add byalang -->
      <princexml-path>/usr/local/bin/prince</princexml-path>

      <!-- <deki-resources-path>/var/www/mks-wiki/resources</deki-resources-path> -->
      <!-- dblogging-conn-string>Server=localhost;Port=3306;Database=wikidb;Uid=root;Pwd=password;pooling=true; Connection Timeout=5; Protocol=sockets; Min Pool Size=1; Max Pool Size=100; Connection Reset=false;character set=utf8;ProcedureCacheSize=25;Use Procedure Bodies=true;</dblogging-conn-string -->

      <wikis>

        <globalconfig>
          <!-- optional overrides for all instances -->
        </globalconfig>

        <config id="default">
          <!-- Per instance settings -->
          <!-- host: hostname for the wiki. Use * for all hosts. Multiple <host> entries may be used per site.-->
          <!-- db-server: hostname/ip of database for this instance-->
          <!-- db-port: db port (default 3306 for mysql)-->
          <!-- db-catalog: catalog or database name for this instance -->
          <!-- db-user: db account to use. Ensure full access to the catalog and rights to exec stored procs.-->
          <!-- db-password: password for db account-->
          <!-- db-options: other connection string settings. Ensure db connection pooling is enabled and that the connection supports utf8 encoding-->

          <host>www.example.tw</host>
          <host>m.example.tw</host>

          <db-server>localhost</db-server>
          <db-port>3306</db-port>
          <db-catalog>wikidb</db-catalog>
          <db-user>wikiuser</db-user>
          <db-password hidden="true">ThisIsDBPass</db-password>
          <db-options>pooling=true; Connection Timeout=5; Connection Lifetime=30; Protocol=socket; Min Pool Size=2; Max Pool Size=50; Connection Reset=false;character set=utf8;ProcedureCacheSize=25;Use Procedure Bodies=true;</db-options>
        </config>

      </wikis>

      <!-- filter-path: file extension and the location of an executable to convert that file extension to plain text.  -->
      <!--              Note: the executable MUST read from stdin and write to stdout -->

      <indexer>
        <path.store>/var/www/dekiwiki/bin/cache/luceneindex/$1</path.store>
        <filter-path extension="doc">/var/www/dekiwiki/bin/filters/wvText</filter-path>
        <filter-path extension="pdf">/var/www/dekiwiki/bin/filters/pdf2text</filter-path>
        <filter-path extension="xhtml">/var/www/dekiwiki/filters/html2text</filter-path>
        <filter-path extension="html">/var/www/dekiwiki/bin/filters/html2text</filter-path>
        <filter-path extension="htm">/var/www/dekiwiki/bin/filters/html2text</filter-path>
        <filter-path extension="docx">/var/www/dekiwiki/bin/filters/docx2txt</filter-path>
        <filter-path extension="odt">/var/www/dekiwiki/bin/filters/odt2txt</filter-path>
        <filter-path extension="odp">/var/www/dekiwiki/bin/filters/odp2txt</filter-path>
        <filter-path extension="ppt">/var/www/dekiwiki/bin/filters/ppt2txt</filter-path>
        <filter-path extension="pptx">/var/www/dekiwiki/bin/filters/pptx2txt</filter-path>
        <filter-path extension="xls">/var/www/dekiwiki/bin/filters/xls2txt</filter-path>
        <filter-path extension="pl"></filter-path>
        <filter-path extension="c"></filter-path>
        <filter-path extension="h"></filter-path>
        <filter-path extension="inc"></filter-path>
        <filter-path extension="php"></filter-path>
        <filter-path extension="cs"></filter-path>
        <filter-path extension="txt"></filter-path>
        <filter-path extension="csv"></filter-path>
        <filter-path extension="xml"></filter-path>
        <filter-path extension="xsl"></filter-path>
        <filter-path extension="xslt"></filter-path>
      </indexer>

      </config>
  </action>
</script>

